@using Microsoft.AspNetCore.Identity
@inject SignInManager<ApplicationUser> SignInManager
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Tiny calorie counter is an efficient tool for tracking calories. Use it to loose weight, gain weight or keep your weight. ">
    <title>@ViewData["Title"] - Tiny calorie counter</title>
   
    <link rel="stylesheet" href="~/css/site.css">   
    <link rel="stylesheet" href="~/css/login.css">
    <link rel="stylesheet" href="~/css/chartist.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.2/css/all.css" integrity="sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    <environment include="Development">
        <script src="~/js/chartist.min.js"></script>
    </environment>
    <environment exclude="Development">
        <script src="~/js/chartist.min.js"></script>
    </environment>
</head>
@{
    var controller = ViewContext?.RouteData?.Values["Controller"]?.ToString();
}
<body>
    <header>
        <nav class = "flex-space-wrap navigation">
            <div class = "flex-wrap">
                <a asp-controller="Home" asp-action="Index" style = "padding: 0; margin-right: 1em; height: 32px;">
                    <img src = "/images/logo.svg" alt = "Tiny calorie counter blue logo, links to start page.">                
                </a>

                @if (SignInManager.IsSignedIn(User)) {                
                    <ul class = "flex">
                        <li class='@(controller == "Diary" ? "active" : "")'>
                            <a asp-controller="Diary" asp-action="Index">
                                Diary
                            </a>                  
                        </li>
                        <li class='@(controller == "Statistics" ? "active" : "")'>
                            <a asp-controller="Statistics" asp-action="Week" asp-route-week="@DateUtils.GetIso8601WeekOfYear(DateTime.Now)" asp-route-year = "@DateTime.Now.Year">
                                Statistics
                            </a>                  
                        </li>
                    </ul>
                }
                  
            </div>            
            <partial name="_LoginPartial" />
        </nav>
    </header>
    <main>
        @RenderBody()        
    </main>    
    <footer style="border-width: 2px; padding: 1em;" class="content">
       <partial name="_CookieConsentPartial" />
    </footer>
    @RenderSection("Scripts", required: false)
</body>
</html>
